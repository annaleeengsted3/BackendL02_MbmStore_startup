@using MbmStore.Models;
@using MbmStore.Infrastructure;
@addTagHelper "*, Microsoft.AspNetCore.Mvc.TagHelpers"
@*@model IEnumerable<Product>*@
@model ProductsListViewModel
@{
    //this just creates the metatitle
    ViewData["Title"] = "Products";
}


<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Catalogue</title>
</head>
<body>
    <h1>Products</h1>

    <div class="products">

        @if (Model.Products.OfType<Book>().ToList().Count > 0)
        {
            <div class="products" style="clear:both">
                <h2>The Books</h2>
                @foreach (Book book in Model.Products.OfType<Book>().ToList())
                {
                    @await Html.PartialAsync("_ProductSummaryBook", book)
                }
            </div>
        }

        @if (Model.Products.OfType<MusicCD>().ToList().Count > 0)
        {
            <div class="products" style="clear:both">
                <h2> The CDs </h2>

                @foreach (MusicCD cd in Model.Products.OfType<MusicCD>().ToList())
                {
                    @await Html.PartialAsync("_ProductSummaryMusicCD", cd)
                }

            </div>
        }

        @if (Model.Products.OfType<Movie>().ToList().Count > 0)
        {
            <div class="products" style="clear:both">
                <h2> The Movies </h2>

                @foreach (Movie movie in Model.Products.OfType<Movie>().ToList())
                {
                    @await Html.PartialAsync("_ProductSummaryMovie", movie)
                }

            </div>
        }

    </div>
        <div page-model="@Model.PagingInfo" page-action="Index"></div>

</body>
</html>